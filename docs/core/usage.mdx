---
title: Core
sidebar_label: Usage
---

The `firebase_core` plugin is responsible for connecting your Flutter app to your Firebase project. The plugin must be
installed and initialized before any usage with any other FlutterFire plugins. It provides basic functionality such
as:

- [Initializing FlutterFire](overview#initializing-flutterfire).
- Creating [Secondary Firebase App Instances](usage#installation).

## Installation

The `firebase_core` plugin can be installed by following the [Getting Started](overview.mdx) documentation. Once installed,
import the plugin:

```dart
import 'package:firebase_core/firebase_core.dart';
```

## Default Firebase app

FlutterFire requires a default Firebase app to be present before initialization, otherwise an exception will be thrown.
The steps for setting up a default app for your platform can be found in the [Getting Started](overview.mdx) documentation.

Some plugins such as Analytics & Performance Monitoring are only compatible with the default Firebase app, however
plugins such as Authentication can take advantage of [Secondary Firebase Apps](usage#secondary-firebase-apps),
allowing you to multiple Firebase projects at once.

To access the default app, call the `initializeApp` or `app` method on `FirebaseCore`:

```dart
FirebaseApp defaultApp = await FirebaseCore.instance.initializeApp();
// or
FirebaseApp defaultApp = await FirebaseCore.instance.app();
```

## Secondary Firebase apps

Some FlutterFire plugins allow usage of secondary Firebase apps, letting you interchange which project the
plugin uses. Currently, the Firebase SDKs provide functionality for using secondary apps with the following services:

- Authentication.
- Realtime Database.
- Cloud Firestore.
- Cloud Functions
- Cloud Storage.
- Instance ID.
- ML Kit Natural Language.
- ML Kit Vision.
- Remote Config.

### Initializing secondary apps

To initialize a secondary app, call the `initalizeApp` method with a name and options:

```dart
await FirebaseCore.instance.initializeApp(
    name: 'SecondaryApp',
    options: const FirebaseOptions(
        appId: 'my_appId',
        apiKey: 'my_apiKey',
        messagingSenderId: 'my_messagingSenderId',
        projectId: 'my_projectId'
    )
);
```

At a minimum, you must provide the `appId`, `apiKey`, `messagingSenderId` and `projectId`. Although the other options
are not required, it is recommended you view the [`FirebaseOptions`](https://pub.dev/documentation/firebase_core_platform_interface/latest/firebase_core_platform_interface/FirebaseOptions-class.html)
reference API for the full list of options available.

### Accessing secondary apps

Once initialized, secondary apps can be accessed via the `app` method on `FirebaseCore`:

```dart
FirebaseApp secondaryApp = FirebaseCore.instance.app('SecondaryApp');
```

Attempting to access an app which does not exist will throw an exception.

It is also possible to fetch all existing apps at once via the `apps` property on `FirebaseCore`:

```dart
List<FirebaseApp> apps = FirebaseCore.instance.apps;

apps.forEach((app) {
  print('App name: ${app.name}');
});
```

### Using app instances

Each FlutterFire plugin provides a streamlined approach for using the default app as well as secondary apps (if applicable).
The convenient way to use the default app is by accessing the `instance` variable on each plugin base class. For example
if using Cloud Firestore:

```dart
// Access Firestore using the default Firebase app:
Firestore firestore = Firestore.instance;

firestore
  .collection('users')
  .snapshots()
  .listen((QuerySnapshot snapshot) {
     // Query snapshot of the users collection on the default Firebase app
  });
```

If instead you'd like to use a secondary app, pass it to the `instanceFor` static method on each plugin base class. For
example if using Cloud Firestore:

```dart
FirebaseApp secondaryApp = FirebaseCore.instance.app('SecondaryApp');

Firestore firestore = Firestore.instanceFor(
  app: secondaryApp
);

firestore
  .collection('users')
  .snapshots()
  .listen((QuerySnapshot snapshot) {
     // Query snapshot of the users collection on the SecondaryApp
  });
```

### Deleting instances

If you no longer need a secondary app, you can delete by calling the `delete` method on the `FirebaseApp` instance:

```dart
await FirebaseCore.instance.app('SecondApp').delete();
```

Any plugin usage attempting to use a deleted app will throw an exception. The default app cannot be deleted and will
throw an exception if deleted.
